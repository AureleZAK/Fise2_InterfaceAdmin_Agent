image: python:3.8-alpine


before_script:
  - echo "Dependencies installation"
  - python3 --version
  - pip3 --version
  - pip3 install -r requirements.txt
  

stages:
  - compile
  - lint
  - test

compile:
  stage: compile
  script:
    - "Compiling code"
    - find src/ -type f -name '*.py' -exec python3 -m py_compile {} +

lint:
  stage: lint
  script:
    - echo "Checking code quality"
    - find src/ -type f -name '*.py' -exec python3 -m pylint {} +


test:
  stage: test
  script:
    - echo "Running test"
    - python3 -m pytest src/tests/
